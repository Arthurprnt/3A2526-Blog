{% extends "base.twig" %}

{% block content %}
	<h1 class="mb-4">{{ page_title }}</h1>
	<BR>

	<div class="row g-4">
		<h2 class="mb-4">Posts publiques:</h2>
		{% for post in public_posts %}
			<div class="col-12 col-md-6">
				<div class="card h-100">
					<div class="card-body d-flex flex-column">
						<h5 class="card-title">{{ post.titre }}</h5>
						<p class="card-text">{{ post.contenu|slice(0, 120)|striptags }}...</p>
						<form action="/3A2526-Blog/edit" method="POST" novalidate>
							<input type="hidden" class="form-control" id="envoie" name="envoie" value="false" required>

							<input type="hidden" class="form-control" id="id" name="id" value="{{ post.id }}" required>

							<input type="hidden" class="form-control" id="titre" name="titre" value="{{ post.titre }}" required>

							<textarea class="form-control d-none" id="contenu" name="contenu" rows="5" required>{{ post.contenu }}</textarea>

							<select cl class="form-control d-none" id="visibilite" name="visibilite" rows="5" required>
								<option value="">--- Visibilité du post ---</option>
								<option selected="" value="Publié">Publique</option>
								<option value="Brouillon">Brouillon</option>
							</select>
							<button type="submit" class="btn btn-primary w-100 mt-auto">Editer l'article</button>
						</form>
					</div>
					<div class="card-footer text-muted">
						Modifié le
						{{ post.date_creation|date("d/m/Y") }}
					</div>
				</div>
			</div>
		{% else %}
			<div class="col-12">
				<p>Vous n'avez publié aucun article pour le moment.</p>
			</div>
		{% endfor %}

		<h2 class="mb-4">Posts privés:</h2>
		{% for post in private_posts %}
			<div class="col-12 col-md-6">
				<div class="card h-100">
					<div class="card-body d-flex flex-column">
						<h5 class="card-title">{{ post.titre }}</h5>
						<p class="card-text">{{ post.contenu|slice(0, 120)|striptags }}...</p>
						<form action="/3A2526-Blog/edit" method="POST" novalidate>
							<input type="hidden" class="form-control" id="envoie" name="envoie" value="false" required>

							<input type="hidden" class="form-control" id="id" name="id" value="{{ post.id }}" required>

							<input type="hidden" class="form-control" id="titre" name="titre" value="{{ post.titre }}" required>

							<textarea class="form-control d-none" id="contenu" name="contenu" rows="5" required>{{ post.contenu }}</textarea>

							<select cl class="form-control d-none" id="visibilite" name="visibilite" rows="5" required>
								<option value="">--- Visibilité du post ---</option>
								<option selected="" value="Publié">Publique</option>
								<option value="Brouillon">Brouillon</option>
							</select>
							<button type="submit" class="btn btn-primary w-100 mt-auto">Editer l'article</button>
						</form>
						<div class="card-footer text-muted">
							Modifié le
							{{ post.date_creation|date("d/m/Y") }}
						</div>
					</div>
				</div>
			{% else %}
				<div class="col-12">
					<p>Vvous n'avez pas d'article en brouillon pour le moment.</p>
				</div>
			{% endfor %}
		</div>
	{% endblock %}
